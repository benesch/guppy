<!DOCTYPE html><html lang="en"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1.0"><meta name="generator" content="rustdoc"><meta name="description" content="Configuration for `cargo hakari`."><meta name="keywords" content="rust, rustlang, rust-lang, config"><title>cargo_hakari::config - Rust</title><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Regular-1f7d512b176f0f72.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Regular-018c141bf0843ffd.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/FiraSans-Medium-8f9a781e4970d388.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Regular-562dcc5011b6de7d.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceSerif4-Bold-124a1ca42af929b6.ttf.woff2"><link rel="preload" as="font" type="font/woff2" crossorigin href="../../static.files/SourceCodePro-Semibold-d899c5a5c4aeb14a.ttf.woff2"><link rel="stylesheet" href="../../static.files/normalize-76eba96aa4d2e634.css"><link rel="stylesheet" href="../../static.files/rustdoc-64113db173fe9e58.css" id="mainThemeStyle"><link rel="stylesheet" id="themeStyle" href="../../static.files/light-8fe2cf7ee64a76fb.css"><link rel="stylesheet" disabled href="../../static.files/dark-7aacebe982779e9a.css"><link rel="stylesheet" disabled href="../../static.files/ayu-29dcc614f7a7b461.css"><script id="default-settings" ></script><script src="../../static.files/storage-d43fa987303ecbbb.js"></script><script defer src="../../static.files/main-a211dbb005fb8161.js"></script><noscript><link rel="stylesheet" href="../../static.files/noscript-13285aec31fa243e.css"></noscript><link rel="alternate icon" type="image/png" href="../../static.files/favicon-16x16-8b506e7a72182f1c.png"><link rel="alternate icon" type="image/png" href="../../static.files/favicon-32x32-422f7d1d52889060.png"><link rel="icon" type="image/svg+xml" href="../../static.files/favicon-2c020d218678b618.svg"></head><body class="rustdoc mod"><!--[if lte IE 11]><div class="warning">This old browser is unsupported and will most likely display funky things.</div><![endif]--><nav class="mobile-topbar"><button class="sidebar-menu-toggle">&#9776;</button><a class="sidebar-logo" href="../../cargo_hakari/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2></h2></nav><nav class="sidebar"><a class="sidebar-logo" href="../../cargo_hakari/index.html"><div class="logo-container"><img class="rust-logo" src="../../static.files/rust-logo-151179464ae7ed46.svg" alt="logo"></div></a><h2 class="location"><a href="#">Module config</a></h2><div class="sidebar-elems"></div></nav><main><div class="width-limiter"><nav class="sub"><form class="search-form"><span></span><input class="search-input" name="search" aria-label="Run search in the documentation" autocomplete="off" spellcheck="false" placeholder="Click or press ‘S’ to search, ‘?’ for more options…" type="search"><div id="help-button" title="help" tabindex="-1"><a href="../../help.html">?</a></div><div id="settings-menu" tabindex="-1"><a href="../../settings.html" title="settings"><img width="22" height="22" alt="Change settings" src="../../static.files/wheel-5ec35bf9ca753509.svg"></a></div></form></nav><section id="main-content" class="content"><div class="main-heading"><h1 class="fqn">Module <a href="../index.html">cargo_hakari</a>::<wbr><a class="mod" href="#">config</a><button id="copy-path" onclick="copy_path(this)" title="Copy item path to clipboard"><img src="../../static.files/clipboard-7571035ce49a181d.svg" width="19" height="18" alt="Copy item path"></button></h1><span class="out-of-band"><a class="srclink" href="../../src/cargo_hakari/docs/config.rs.html#4-197">source</a> · <button id="toggle-all-docs" title="collapse all docs">[<span>&#x2212;</span>]</button></span></div><details class="rustdoc-toggle top-doc" open><summary class="hideme"><span>Expand description</span></summary><div class="docblock"><p>Configuration for <code>cargo hakari</code>.</p>
<h2 id="configuration-file-location"><a href="#configuration-file-location">Configuration file location</a></h2>
<p>The default config path for cargo-hakari versions 0.9.8 or above is <code>.config/hakari.toml</code>,
relative to the root of the workspace. Previous versions used <code>.guppy/hakari.toml</code>, which
continues to be supported as a fallback.</p>
<h2 id="common-options"><a href="#common-options">Common options</a></h2><h3 id="hakari-package"><a href="#hakari-package">hakari-package</a></h3>
<p>The name of the hakari-managed crate in the workspace. Must be specified. For example:</p>
<div class="example-wrap"><pre class="language-toml"><code>hakari-package = &quot;my-workspace-hack&quot;
</code></pre></div><h3 id="resolver"><a href="#resolver">resolver</a></h3>
<p>The version of the Cargo feature resolver to use. Version 2 is highly recommended.
For more, see this <a href="https://blog.rust-lang.org/2021/03/25/Rust-1.51.0.html#cargos-new-feature-resolver">Rust blog post</a>.</p>
<p>Defaults to “1”, but <code>.config/hakari.toml</code> files created by <code>cargo hakari init</code> set it to “2”.</p>
<div class="example-wrap"><pre class="language-toml"><code>resolver = &quot;2&quot;
</code></pre></div><h3 id="dep-format-version"><a href="#dep-format-version">dep-format-version</a></h3>
<p>The version of <code>workspace-hack = ...</code> lines in other <code>Cargo.toml</code> files to use.</p>
<p>Possible values:</p>
<ul>
<li><em>“1”</em>: <code>workspace-hack = { path = ...}</code>. (Note the lack of a trailing space.)</li>
<li><em>“2”</em>: <code>workspace-hack = { version = &quot;0.1&quot;, path = ... }</code>. This is required for the advanced
setup documented in the <a href="../publishing/index.html">Publishing</a> section.</li>
</ul>
<p>Defaults to “1”, but starting <code>cargo hakari 0.9.8</code>, <code>.config/hakari.toml</code> files created by
<code>cargo hakari init</code> set it to “2”.</p>
<div class="example-wrap"><pre class="language-toml"><code>dep-format-version = &quot;2&quot;
</code></pre></div><h3 id="platforms"><a href="#platforms">platforms</a></h3>
<p>Platforms to run specific queries on.</p>
<p>By default, <code>cargo hakari</code> produces the minimal set of features that can be unified across
all possible platforms. However, in practice, most developers on a codebase use one of a
few platforms. <code>cargo hakari</code> can run specific queries for a few platforms, producing better
results for them.</p>
<p>Defaults to an empty list.</p>
<div class="example-wrap"><pre class="language-toml"><code>## Unify features on x86_64 Linux, Mac and Windows.
platforms = [
     &quot;x86_64-unknown-linux-gnu&quot;,
     &quot;x86_64-apple-darwin&quot;,
     &quot;x86_64-pc-windows-msvc&quot;,
]
</code></pre></div><h3 id="traversal-excludes"><a href="#traversal-excludes">traversal-excludes</a></h3>
<p>Crates to exclude while traversing the dependency graph.</p>
<p>Packages specified in <code>traversal-excludes</code> will be omitted while searching for dependencies.
These packages will not be included in the final output. Any transitive dependencies of
these packages will not be included in the final result, unless those dependencies are reachable
from other crates.</p>
<p>Workspace crates excluded from traversals will not depend on the workspace-hack crate, and
<code>cargo hakari manage-deps</code> will <em>remove</em> dependency edges rather than adding them.</p>
<p>This is generally useful for crates that have mutually exclusive features, and that turn on
mutually exclusive features in their transitive dependencies.</p>
<p>Defaults to an empty set.</p>
<div class="example-wrap"><pre class="language-toml"><code>[traversal-excludes]
workspace-members = [&quot;my-crate&quot;, &quot;my-other-crate&quot;]
third-party = [
    ## Third-party crates accept semver ranges.
    { name = &quot;mutually-exclusive-crate&quot;, version = &quot;1.0&quot; },

    ## The version specifier can be skipped to include all versions of a crate.
    ## (Cryptography-related crates often use features to switch on different backends.)
    { name = &quot;my-cryptography&quot; },

    ## Git and path dependencies can also be specified
    { name = &quot;git-dependency&quot;, git = &quot;https://github.com/my-org/git-dependency&quot; },
    { name = &quot;path-dependency&quot;, path = &quot;../my/path/dependency&quot; }
]
</code></pre></div><h3 id="final-excludes"><a href="#final-excludes">final-excludes</a></h3>
<p>Crates to remove at the end of computation.</p>
<p>Packages specified in <code>final-excludes</code> will be removed from the output at the very end. This
means that any transitive dependencies of theirs will still be included.</p>
<p>Workspace crates excluded from the final output will not depend on the workspace-hack crate, and
<code>cargo hakari manage-deps</code> will <em>remove</em> dependency edges rather than adding them.</p>
<p>This is generally useful for crates that have mutually exclusive features.</p>
<p>This accepts configuration in the same format as <code>traversal-excludes</code> above.</p>
<p>Defaults to an empty set.</p>
<div class="example-wrap"><pre class="language-toml"><code>[final-excludes]
workspace-members = [&quot;my-crate&quot;, &quot;your-crate&quot;]
third-party = [
    ## The &quot;fail&quot; crate uses the &quot;failpoints&quot; feature to enable random errors at runtime.
    ## It is a good candidate for exclusion from the final output.
    { name = &quot;fail&quot; },

    ## Version specifiers and git/path dependencies work similarly to traversal-excludes
    ## above.
]
</code></pre></div><h3 id="registries"><a href="#registries">registries</a></h3>
<p>Alternate registries,
<a href="https://doc.rust-lang.org/cargo/reference/registries.html">in the same format</a> as
<code>.cargo/config.toml</code>.</p>
<p>This is a temporary workaround until <a href="https://github.com/rust-lang/cargo/issues/9052">Cargo issue #9052</a>
is resolved.</p>
<p>Defaults to an empty set.</p>
<div class="example-wrap"><pre class="language-toml"><code>[registries]
my-registry = { index = &quot;https://my-intranet:8080/git/index&quot; }
</code></pre></div><h2 id="output-options"><a href="#output-options">Output options</a></h2><h3 id="exact-versions"><a href="#exact-versions">exact-versions</a></h3>
<p>By default, the workspace-hack crate’s <code>Cargo.toml</code> file will contain a semver range. With
<code>exact-versions</code> turned on, the exact version currently in use will be output.</p>
<p>This is most useful for situations where the <code>Cargo.lock</code> file is checked in, and if
version numbers are kept in sync across <code>Cargo.toml</code> and <code>Cargo.lock</code>. This includes some
configurations of <a href="https://dependabot.com/">Dependabot</a>.</p>
<p>Defaults to false.</p>
<div class="example-wrap"><pre class="language-toml"><code>exact-versions = true
</code></pre></div><h2 id="advanced-options"><a href="#advanced-options">Advanced options</a></h2><h3 id="unify-target-host"><a href="#unify-target-host">unify-target-host</a></h3>
<p>Controls unification across target and host platforms.</p>
<p>If the same dependency is built on both the target and host platforms, this option controls
whether and how they should be unified.</p>
<p>The possible options are <code>&quot;none&quot;</code>, <code>&quot;auto&quot;</code>, <code>&quot;unify-if-both&quot;</code>, and
<code>&quot;replicate-target-on-host&quot;</code>. For more about these options, see the documentation for
<a href="../../hakari/hakari/enum.UnifyTargetHost.html"><code>UnifyTargetHost</code></a>.</p>
<p>Defaults to <code>&quot;auto&quot;</code>.</p>
<div class="example-wrap"><pre class="language-toml"><code>unify-target-host = &quot;replicate-target-on-host&quot;
</code></pre></div><h3 id="output-single-feature"><a href="#output-single-feature">output-single-feature</a></h3>
<p>By default, <code>cargo hakari</code> only outputs lines corresponding to third-party dependencies which
are built with at least two different sets of features. Setting this option to true will
cause <code>cargo hakari</code> to output lines corresponding to dependencies built with just one set
of features.</p>
<p>This is generally not needed but may be useful in some situations.</p>
<p>Defaults to false.</p>
<div class="example-wrap"><pre class="language-toml"><code>output-single-feature = true
</code></pre></div></div></details></section></div></main><div id="rustdoc-vars" data-root-path="../../" data-static-root-path="../../static.files/" data-current-crate="cargo_hakari" data-themes="" data-resource-suffix="" data-rustdoc-version="1.68.0-nightly (1d12c3cea 2022-12-20)" data-search-js="search-444266647c4dba98.js" data-settings-js="settings-bebeae96e00e4617.js" data-settings-css="settings-58836c674e2f7bd2.css" ></div></body></html>